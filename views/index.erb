<!DOCTYPE HTML>
<!--
            _
          (_)    | |
 _ __ ___  ___  _| |_ __ _ _ __   ___
| '_ ` _ \| \ \/ / __/ _` | '_ \ / _ \
| | | | | | |>  <| || (_| | |_) |  __/
|_| |_| |_|_/_/\_\\__\__,_| .__/ \___|
                          | |
                          |_|

https://github.com/seadowg/mixtape

-->
<html>
  <head>
    <title>_</title>
    <style>
      body {
        padding: 8em;
        background-color: black;
        display: flex;
        justify-content: center;
      }

      #play_button {
        height: 2em;
        font-size: 32px;
        flex-grow: 1
      }
    </style>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function() {
        function setupNextPlay(i) {
          document.getElementById(i).addEventListener("ended", function() {
            $('#' + (i + 1))[0].play();
          });
        }

        for (var i = 0; i < <%= song_count %>; i++) {
          setupNextPlay(i);
        }

        document.getElementById("play_button").addEventListener("click", function() {
          document.getElementById("play_button").style.visibility = "hidden";
          document.getElementById("0").play();
        });
      });
    </script>
  </head>
  <body>
    <% song_count.times do |i| %>
      <audio id='<%= i %>'><source src='songs/<%= i %>.mp3' type='audio/mpeg'></audio>
    <% end %>

    <button id="play_button" type="button">Play</button>
  </body>
</html>
